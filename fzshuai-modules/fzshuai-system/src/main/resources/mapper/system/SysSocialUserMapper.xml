<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="top.fzshuai.system.mapper.SysSocialUserMapper">

    <resultMap type="top.fzshuai.system.domain.vo.SysSocialUserVo" id="SocialUserAuthResult">
        <id property="socialId" column="social_id"/>
        <id property="userId" column="user_id"/>
        <id property="authId" column="auth_id"/>
        <id property="source" column="source"/>
        <id property="openId" column="open_id"/>
        <id property="userName" column="user_name"/>
        <id property="nickName" column="nick_name"/>
        <id property="email" column="email"/>
        <id property="avatar" column="avatar"/>
        <id property="accessToken" column="access_token"/>
        <id property="refreshToken" column="refresh_token"/>
        <id property="accessCode" column="access_code"/>
        <id property="unionId" column="union_id"/>
        <id property="scope" column="scope"/>
        <id property="tokenType" column="token_type"/>
        <id property="idToken" column="id_token"/>
        <id property="macAlgorithm" column="mac_algorithm"/>
        <id property="macKey" column="mac_key"/>
        <id property="code" column="code"/>
        <id property="oauthToken" column="oauth_token"/>
        <id property="oauthTokenSecret" column="oauth_token_secret"/>
    </resultMap>

    <select id="selectByAuthId" parameterType="String" resultMap="SocialUserAuthResult">
        select b.user_id,
               b.user_name,
               b.password,
               a.auth_id,
               a.source
        from sys_social_user a
                 left join sys_user b on a.user_id = b.user_id
        where a.auth_id = #{authId}
    </select>

</mapper>
